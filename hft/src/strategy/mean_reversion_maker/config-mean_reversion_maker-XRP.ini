[strategy]
algorithm = maker

# ==========================================
# Symbol: XRPUSDT (Binance Futures)
# Reference Price: ~$2.50 (Dec 2025 Estimate)
# ==========================================

# === Position Mode ===
allow_simultaneous_positions = false

# === Dynamic Wall Threshold (Hybrid Mode - XRP Specialized) ===
# [Critical] XRP has many fake walls - require 5x average volume
# EMA Alpha: Higher = more reactive to recent changes (XRP needs faster adaptation)
wall_volume_ema_alpha = 0.05          # [Increased] BTC(0.03) -> XRP(0.05), faster response
wall_volume_multiplier = 5.0          # [Increased] BTC(4.0) -> XRP(5.0)
wall_volume_min_samples = 20

# Orderbook-based
wall_orderbook_top_levels = 30        # [Expanded] Thinner orderbook, need wider view
wall_orderbook_multiplier = 4.0       # [Increased] BTC(3.0) -> XRP(4.0)
wall_orderbook_percentile = 85        # Trust only top 15%

# Hybrid weights (must sum to 1.0)
wall_volume_weight = 0.7
wall_orderbook_weight = 0.3

# Minimum wall quantity (XRP) - auto-scales with price
# Example: 80,000 XRP × $2.5 = $200k, 80,000 XRP × $5.0 = $400k
# Lower than BTC but very high for altcoins
wall_min_quantity = 80000.0           # 80,000 XRP (~$200k at $2.5)

# === Wall Detection Range (Volatility Adjustment) ===
# XRP moves 0.1% in milliseconds - allow slightly wider range than BTC
# 0.2% = ~$0.005 at $2.5 (50 ticks range)
wall_max_distance_pct = 0.0020        # BTC(0.15%) -> XRP(0.20%)
wall_max_levels = 100

# === Defense Validation ===
# XRP has severe fake-outs and whipsaws
# Require 2.5x remaining quantity (more conservative)
defense_qty_multiplier = 2.5          # BTC(2.0) -> XRP(2.5)

# === Entry Conditions ===
# === Robust Z-score Parameters ===
# XRP volatility is higher than BTC, adjust accordingly
zscore_window_size = 30               # Same as BTC
zscore_min_samples = 20               # Same as BTC
zscore_entry_threshold = 3.0          # BTC(2.5) -> XRP(3.0), more conservative

# === Trend Filter ===
trend_filter_enabled = true
trend_lookback_ticks = 5
trend_consecutive_threshold = 4
trend_volume_multiplier = 2.0         # BTC(1.5) -> XRP(2.0), stronger filter

# === Entry Conditions ===
# OBI (Orderbook Imbalance) threshold
entry_obi_threshold = 0.25
entry_obi_levels = 5

# Price discount/premium (legacy mode only)
entry_discount_threshold_pct = 0.0002

# Position size (1000 XRP = ~$2,500)
# Start with 100-500 XRP for testing
position_size = 1000.0

# Maker order offset
entry_safety_margin = 0.00005

# [Critical] Minimum spread filter
# 1 tick (0.0001) = 0.004%
# Fees (0.04%~0.05%) require 10-12 ticks profit minimum
# Only enter when spread > 0.05%
min_spread_filter = 0.0005            # 0.05% (12.5 ticks)

# === Exit Strategy (Stop Loss) ===
# XRP trends strongly - once it breaks, it cascades
# More aggressive stop loss than BTC

# Wall amount decay (exit if wall drops below 60%)
wall_amount_decay_ratio = 0.6         # BTC(50%) -> XRP(60%)

# Wall distance expand (exit if wall moves 1.2x further)
wall_distance_expand_ratio = 1.2

# Maximum loss (0.3% - account for higher volatility)
max_loss_pct = 0.003                  # BTC(0.2%) -> XRP(0.3%)

# Stop loss mode
stop_loss_mode = taker

# === Debugging & Logging ===
log_wall_detection = true
log_defense_check = true
log_entry_exit = true

# ==========================================
# XRP-Specific Notes
# ==========================================
# 1. Fake Walls: XRP has many spoofed orders
#    → Increased multipliers (5.0x volume, 4.0x orderbook)
#
# 2. Thin Orderbook: Less depth than BTC
#    → Wider detection range (0.2% vs 0.15%)
#    → More levels checked (30 vs 20)
#
# 3. Strong Trends: Once momentum starts, hard to reverse
#    → Tighter stop loss (60% vs 50%)
#    → Higher max loss tolerance (0.3% vs 0.2%)
#
# 4. Tick Value: 0.0001 = 0.004%
#    → Minimum 12.5 ticks spread required
#    → Fee structure similar to BTC
#
# 5. Liquidity Cycles:
#    → 5-minute volume window (vs 10-min for BTC)
#    → Faster adaptation to market conditions
# ==========================================
