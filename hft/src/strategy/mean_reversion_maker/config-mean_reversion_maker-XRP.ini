[strategy]
algorithm = maker
allow_simultaneous_positions = false

# ==========================================
# 심볼: XRPUSDT (바이낸스 선물)
# 참조 가격: ~$2.50 (2025년 12월 추정)
# ==========================================

# =========================================
# 벽 탐지 범위
# =========================================
[wall_detection]
# XRP는 밀리초 단위로 0.1% 움직임 - BTC보다 약간 넓은 범위 허용
# 0.2% = $2.5 기준 약 $0.005 (50틱 범위)
max_distance_pct = 0.0020  # BTC(0.15%) -> XRP(0.20%)

# 탐색할 최대 호가 레벨 수
max_levels = 100

# =========================================
# 벽 방어 (동적 임계값 - XRP 특화)
# =========================================
[wall_defense]
# [중요] XRP는 가짜 벽이 많음 - 평균 거래량의 5배 요구
# EMA Alpha: 높을수록 최근 변화에 더 빠르게 반응 (XRP는 빠른 적응 필요)
volume_ema_alpha = 0.05  # [증가] BTC(0.03) -> XRP(0.05), 빠른 반응
volume_multiplier = 5.0  # [증가] BTC(4.0) -> XRP(5.0)
volume_min_samples = 20

# 호가창 기반 컴포넌트
orderbook_top_levels = 30        # [확장] 얇은 호가창, 넓은 시야 필요
orderbook_multiplier = 4.0       # [증가] BTC(3.0) -> XRP(4.0)
orderbook_percentile = 85        # 상위 15%만 신뢰

# 하이브리드 가중치 (합계 1.0)
volume_weight = 0.7
orderbook_weight = 0.3

# 최소 벽 수량 (XRP) - 가격에 따라 자동 스케일링
# XRP 호가창은 얇으므로 낮게 설정
# 10,000 XRP × $1.87 = $18,700
min_quantity = 10000.0  # 10,000 XRP ($1.87 기준 약 $18.7k)

# XRP는 심각한 페이크아웃과 휩쏘 발생
# 남은 수량 2.5배 요구 (더 보수적)
qty_multiplier = 2.5  # BTC(2.0) -> XRP(2.5)

# =========================================
# Robust Z-score (변동성 적응형)
# =========================================
[robust_zscore]
# XRP 변동성이 BTC보다 높음, 그에 맞게 조정
window_size = 30        # BTC와 동일
min_samples = 20        # 높은 변동성, 더 많은 샘플 필요
entry_threshold = 2.0   # BTC와 동일

# 최소 MAD 임계값: XRP 가격대 고려 (BTC 5.0 → XRP 0.0001)
min_mad_threshold = 0.0001

# =========================================
# 트렌드 가속 필터 (안전장치)
# =========================================
[trend_filter]
enabled = true
lookback_ticks = 5
consecutive_threshold = 4
volume_multiplier = 2.0  # BTC(1.5) -> XRP(2.0), 더 강한 필터

# =========================================
# 진입 조건
# =========================================
[entry]
# OBI (호가창 불균형) 임계값
obi_threshold = 0.25
obi_levels = 5

# 포지션 크기 (1000 XRP = 약 $2,500)
# 테스트는 100-500 XRP로 시작
position_size = 10.0

# 메이커 오더 오프셋 (1틱 안쪽에서 Maker 체결 유도)
safety_margin = 0.0001

# [중요] 최소 스프레드 필터
# 1틱 (0.0001) = 0.004%
# 수수료 (0.04%~0.05%) 최소 10-12틱 이익 필요
# 스프레드 > 0.05%일 때만 진입
min_spread_filter = 0.0000  # 0.05% (12.5틱)

# =========================================
# 청산 전략 (손절)
# =========================================
[exit]
# XRP는 트렌드가 강함 - 한번 뚫리면 연쇄 반응
# BTC보다 더 공격적인 손절

# 벽 수량 감소 (벽이 60% 이하로 떨어지면 청산)
wall_amount_decay_ratio = 0.6  # BTC(50%) -> XRP(60%)

# 벽 거리 확장 (벽이 5.0배 더 멀어지면 청산)
wall_distance_expand_ratio = 2.5

# 최대 손실 (0.3% - 높은 변동성 고려)
max_loss_pct = 0.0015  # BTC(0.2%) -> XRP(0.3%)

# =========================================
# 디버깅 & 로깅
# =========================================
[debug]
log_wall_detection = true
log_defense_check = true
log_entry_exit = true

# ==========================================
# XRP 특화 노트
# ==========================================
# 1. 가짜 벽: XRP는 스푸핑 주문이 많음
#    → 배수 증가 (5.0x 거래량, 4.0x 호가창)
#
# 2. 얇은 호가창: BTC보다 깊이가 얕음
#    → 넓은 탐지 범위 (0.2% vs 0.15%)
#    → 더 많은 레벨 확인 (30 vs 20)
#
# 3. 강한 트렌드: 모멘텀 시작되면 반전 어려움
#    → 더 빠른 손절 (60% vs 50%)
#    → 더 높은 최대 손실 허용 (0.3% vs 0.2%)
#
# 4. 틱 가치: 0.0001 = 0.004%
#    → 최소 12.5틱 스프레드 필요
#    → BTC와 유사한 수수료 구조
#
# 5. 유동성 사이클:
#    → 5분 거래량 윈도우 (BTC는 10분)
#    → 시장 조건에 더 빠른 적응
# ==========================================
